<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI ì“°ë ˆê¸° ë¶„ë¥˜ ë„ìš°ë¯¸</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons (ì•„ì´ì½˜ ì‚¬ìš©ì„ ìœ„í•´ ë¡œë“œ) -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f9fb;
        }
        /* Custom styles for the result icons */
        .result-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .result-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        /* Top 1 result card shadow for emphasis */
        .result-card-primary {
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
    </style>
</head>
<body class="p-4 md:p-8 min-h-screen flex items-center justify-center">

    <div class="w-full max-w-2xl bg-white p-6 md:p-10 rounded-xl shadow-2xl">
        <header class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-800 flex items-center justify-center">
                <i data-lucide="recycle" class="w-8 h-8 mr-3 text-green-600"></i>
                AI ë¶„ë¦¬ìˆ˜ê±° ë„ìš°ë¯¸
            </h1>
            <p class="mt-2 text-gray-500">ì‚¬ì§„ì„ ì˜¬ë ¤ì£¼ì‹œë©´ AIê°€ ì˜¬ë°”ë¥¸ ë¶„ë¦¬ìˆ˜ê±° ë°©ë²•ì„ ì•Œë ¤ë“œë¦½ë‹ˆë‹¤.</p>
        </header>

        <!-- Notification/Message Box -->
        <div id="message-box" class="hidden p-3 mb-4 rounded-lg text-sm font-medium border" role="alert"></div>

        <!-- Image Upload Section -->
        <div id="upload-area" class="border-2 border-dashed border-gray-300 p-8 rounded-lg text-center cursor-pointer hover:border-green-500 transition duration-300 bg-gray-50">
            <input type="file" id="file-input" accept="image/*" class="hidden">
            <i data-lucide="cloud-upload" class="w-10 h-10 mx-auto text-gray-400 mb-2"></i>
            <p class="text-gray-600 font-semibold">ì—¬ê¸°ì— ì´ë¯¸ì§€ë¥¼ ë“œë˜ê·¸í•˜ê±°ë‚˜ í´ë¦­í•˜ì—¬ ì—…ë¡œë“œ</p>
            <p class="text-xs text-gray-400 mt-1">(JPEG, PNG íŒŒì¼ ê¶Œì¥)</p>
        </div>

        <div id="preview-area" class="mt-6 hidden">
            <h2 class="text-xl font-semibold text-gray-700 mb-3 border-b pb-2">ì—…ë¡œë“œ ë¯¸ë¦¬ë³´ê¸°</h2>
            <img id="image-preview" class="w-full max-h-80 object-contain rounded-lg shadow-md mb-4" alt="ì—…ë¡œë“œ ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸°">
            <button id="classify-button" class="w-full py-3 bg-green-600 text-white font-bold rounded-lg hover:bg-green-700 transition duration-300 shadow-md flex items-center justify-center disabled:opacity-50" disabled>
                <i data-lucide="zap" class="w-5 h-5 mr-2"></i>
                AI ë¶„ë¥˜ ì‹œì‘
            </button>
        </div>

        <!-- Result Section -->
        <div id="result-section" class="mt-8 hidden">
            <h2 class="text-2xl font-bold text-gray-800 mb-4 flex items-center">
                <i data-lucide="clipboard-list" class="w-6 h-6 mr-2 text-green-600"></i>
                ë¶„ë¥˜ ê²°ê³¼
            </h2>
            
            <div id="loading-indicator" class="hidden text-center p-8">
                <div class="animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-green-500 mx-auto mb-3"></div>
                <p class="text-gray-600">AIê°€ ì“°ë ˆê¸°ë¥¼ ë¶„ì„ ì¤‘ì…ë‹ˆë‹¤...</p>
            </div>

            <div id="classification-result" class="flex flex-col gap-4">
                <!-- Classification result (Top 3) will be injected here -->
            </div>
            
            <!-- Guidance Box -->
            <div id="guidance-box" class="mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg text-sm text-yellow-800 hidden">
                <p class="font-semibold mb-1">ğŸš¨ ìœ ì˜ì‚¬í•­:</p>
                <p>AI ë¶„ë¥˜ëŠ” ì°¸ê³ ìš©ì´ë©°, ìµœì¢… ë¶„ë¦¬ìˆ˜ê±°ëŠ” í•´ë‹¹ ì§€ìì²´ì˜ ê·œì •ì„ ë”°ë¥´ì…”ì•¼ í•©ë‹ˆë‹¤. (ëª¨ë¸ ë²„ì „: EfficientNet_V2.1)</p>
            </div>
        </div>

    </div>

    <script>
        // API Endpoint (FastAPI ì„œë²„ ì£¼ì†Œ)
        // ë¡œì»¬ í™˜ê²½ì—ì„œ FastAPI ì„œë²„ë¥¼ ë„ìš¸ ê²½ìš° ì•„ë˜ ì£¼ì†Œë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
        const API_ENDPOINT = "http://localhost:8000/classify"; 

        const fileInput = document.getElementById('file-input');
        const uploadArea = document.getElementById('upload-area');
        const imagePreview = document.getElementById('image-preview');
        const previewArea = document.getElementById('preview-area');
        const classifyButton = document.getElementById('classify-button');
        const resultSection = document.getElementById('result-section');
        const classificationResultDiv = document.getElementById('classification-result');
        const loadingIndicator = document.getElementById('loading-indicator');
        const guidanceBox = document.getElementById('guidance-box');
        const messageBox = document.getElementById('message-box');

        let selectedFile = null;

        // --- Helper Functions ---

        /**
         * ì»¤ìŠ¤í…€ ë©”ì‹œì§€ ë°•ìŠ¤ í‘œì‹œ (alert() ëŒ€ì‹  ì‚¬ìš©)
         * @param {string} message í‘œì‹œí•  ë©”ì‹œì§€
         * @param {string} type ë©”ì‹œì§€ íƒ€ì… ('success', 'error', 'info')
         */
        function showMessage(message, type = 'info') {
            messageBox.textContent = message;
            messageBox.className = "p-3 mb-4 rounded-lg text-sm font-medium border";

            switch (type) {
                case 'success':
                    messageBox.classList.add('bg-green-100', 'border-green-400', 'text-green-700');
                    break;
                case 'error':
                    messageBox.classList.add('bg-red-100', 'border-red-400', 'text-red-700');
                    break;
                case 'info':
                default:
                    messageBox.classList.add('bg-blue-100', 'border-blue-400', 'text-blue-700');
            }
            messageBox.classList.remove('hidden');
        }

        /**
         * íŒŒì¼ì„ ì½ì–´ ë¯¸ë¦¬ë³´ê¸°ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.
         * @param {File} file ì—…ë¡œë“œëœ íŒŒì¼ ê°ì²´
         */
        function handleFile(file) {
            if (file && file.type.startsWith('image/')) {
                selectedFile = file;
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    imagePreview.src = e.target.result;
                    previewArea.classList.remove('hidden');
                    classifyButton.disabled = false;
                    resultSection.classList.add('hidden');
                    classificationResultDiv.innerHTML = ''; // ì´ì „ ê²°ê³¼ ì´ˆê¸°í™”
                    messageBox.classList.add('hidden');
                };
                reader.readAsDataURL(file);
            } else {
                showMessage("ì´ë¯¸ì§€ íŒŒì¼(JPEG, PNG)ë§Œ ì—…ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.", 'error');
                selectedFile = null;
                previewArea.classList.add('hidden');
                classifyButton.disabled = true;
            }
        }

        // --- Event Listeners ---

        // 1. í´ë¦­ìœ¼ë¡œ íŒŒì¼ ì…ë ¥ íŠ¸ë¦¬ê±°
        uploadArea.addEventListener('click', () => {
            fileInput.click();
        });

        // 2. íŒŒì¼ ì…ë ¥ ë³€ê²½ ê°ì§€
        fileInput.addEventListener('change', (e) => {
            if (e.target.files.length > 0) {
                handleFile(e.target.files[0]);
            }
        });

        // 3. ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì´ë²¤íŠ¸ ì²˜ë¦¬
        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
            uploadArea.addEventListener(eventName, (e) => {
                e.preventDefault();
                e.stopPropagation();
                if (eventName === 'dragenter' || eventName === 'dragover') {
                    uploadArea.classList.add('border-green-500', 'bg-green-50');
                } else if (eventName === 'dragleave') {
                    uploadArea.classList.remove('border-green-500', 'bg-green-50');
                }
            }, false);
        });

        uploadArea.addEventListener('drop', (e) => {
            uploadArea.classList.remove('border-green-500', 'bg-green-50');
            const dt = e.dataTransfer;
            const files = dt.files;
            if (files.length > 0) {
                handleFile(files[0]);
            }
        });

        // 4. ë¶„ë¥˜ ë²„íŠ¼ í´ë¦­ ì²˜ë¦¬
        classifyButton.addEventListener('click', () => {
            if (selectedFile) {
                classifyImage(selectedFile);
            } else {
                showMessage("ë¨¼ì € ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•´ ì£¼ì„¸ìš”.", 'info');
            }
        });

        // --- Classification Logic ---

        /**
         * ì´ë¯¸ì§€ íŒŒì¼ì„ FastAPI ì„œë²„ë¡œ ì „ì†¡í•˜ê³  ê²°ê³¼ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤.
         * @param {File} file ì „ì†¡í•  íŒŒì¼
         */
        async function classifyImage(file) {
            classifyButton.disabled = true;
            loadingIndicator.classList.remove('hidden');
            resultSection.classList.remove('hidden');
            classificationResultDiv.innerHTML = '';
            guidanceBox.classList.add('hidden');
            messageBox.classList.add('hidden');

            // FormData ìƒì„± ë° íŒŒì¼ ì¶”ê°€
            const formData = new FormData();
            formData.append('file', file);

            try {
                // **ì£¼ì˜:** ì‹¤ì œ AI ëª¨ë¸ì´ ì—†ëŠ” í™˜ê²½ì—ì„œëŠ” ì´ API í˜¸ì¶œì´ ì‹¤íŒ¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                // ë°°í¬ ì „ì—ëŠ” ë°˜ë“œì‹œ FastAPI ì„œë²„ë¥¼ êµ¬ë™í•´ì•¼ í•©ë‹ˆë‹¤.

                const isRunningInCanvas = typeof __app_id !== 'undefined';
                
                let data;
                if (!isRunningInCanvas) {
                    // Canvas í™˜ê²½ì´ ì•„ë‹ ê²½ìš° (ë¡œì»¬ ê°œë°œ) FastAPIë¥¼ ê°€ì •í•˜ê³  ì‹¤ì œ í˜¸ì¶œ ì‹œë„
                    const response = await fetch(API_ENDPOINT, {
                        method: 'POST',
                        body: formData,
                    });

                    if (!response.ok) {
                        throw new Error(`HTTP Error: ${response.status}`);
                    }
                    data = await response.json();
                } else {
                    // Canvas í™˜ê²½ì—ì„œëŠ” ë°±ì—”ë“œ í˜¸ì¶œì´ ë¶ˆê°€ëŠ¥í•˜ë¯€ë¡œ ì‹œë®¬ë ˆì´ì…˜ ë°ì´í„° ì‚¬ìš©
                    await new Promise(resolve => setTimeout(resolve, 1500)); // ë¡œë”© ì‹œê°„ ì‹œë®¬ë ˆì´ì…˜
                    // ê°œì„ ëœ ì‹œë®¬ë ˆì´ì…˜ì„ ìœ„í•´ íŒŒì¼ëª…ì„ ì „ë‹¬í•©ë‹ˆë‹¤.
                    data = simulateClassification(file.name); 
                }

                displayResult(data);
                showMessage("ë¶„ë¥˜ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤! ê²°ê³¼ë¥¼ í™•ì¸í•´ ì£¼ì„¸ìš”.", 'success');
                guidanceBox.classList.remove('hidden');

            } catch (error) {
                console.error("ë¶„ë¥˜ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:", error);
                showMessage(`ë¶„ë¥˜ ì„œë²„ì™€ì˜ í†µì‹  ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. (${error.message}).`, 'error');
                // ì˜¤ë¥˜ ì‹œì—ë„ ì‹œë®¬ë ˆì´ì…˜ ë°ì´í„°ë¡œ ëŒ€ì²´í•˜ê±°ë‚˜ ë¹ˆ ê²°ê³¼ í‘œì‹œ
                classificationResultDiv.innerHTML = '<p class="text-red-500 text-center col-span-full">ë¶„ë¥˜ ì„œë²„ ì—°ê²° ì‹¤íŒ¨. ë¡œì»¬ FastAPI ì„œë²„ê°€ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸í•´ ì£¼ì„¸ìš”.</p>';

            } finally {
                loadingIndicator.classList.add('hidden');
                classifyButton.disabled = false;
            }
        }

        /**
         * ë¶„ë¥˜ ê²°ê³¼ë¥¼ UIì— í‘œì‹œí•©ë‹ˆë‹¤. (Top 3 í‘œì‹œ)
         * @param {object} data ë¶„ë¥˜ ê²°ê³¼ JSON ë°ì´í„°
         */
        function displayResult(data) {
            classificationResultDiv.innerHTML = '';
            
            // Top 3 ê²°ê³¼ë§Œ ì¶”ì¶œ
            const topResults = data.predictions.slice(0, 3);
            
            let htmlContent = '';
            
            topResults.forEach((result, index) => {
                const isPrimary = index === 0;
                htmlContent += createResultCard(result.label, result.confidence, isPrimary);
            });
            
            classificationResultDiv.innerHTML = htmlContent;
            
            // Lucide ì•„ì´ì½˜ ë‹¤ì‹œ ë Œë”ë§
            lucide.createIcons();
        }

        /**
         * ë¶„ë¥˜ ë¼ë²¨ì— ë”°ë¥¸ ì•„ì´ì½˜ ë° ìƒ‰ìƒ ë§¤í•‘ì„ ì •ì˜í•©ë‹ˆë‹¤. (5ê°œ í´ë˜ìŠ¤)
         * @param {string} label ë¶„ë¥˜ëœ ë¼ë²¨
         * @returns {object} ì•„ì´ì½˜ ì´ë¦„, ìƒ‰ìƒ í´ë˜ìŠ¤
         */
        function getCategoryStyle(label) {
            switch (label) {
                case 'í”Œë¼ìŠ¤í‹±':
                    return { icon: 'package', color: 'blue', desc: 'ë‚´ìš©ë¬¼ì„ ë¹„ìš°ê³  ê¹¨ë—í•˜ê²Œ í—¹ê¶ˆ ë°°ì¶œí•©ë‹ˆë‹¤. (PETë³‘, ìš©ê¸°ë¥˜)' };
                case 'ì¢…ì´':
                    return { icon: 'book-open', color: 'yellow', desc: 'ë¬¼ê¸°ì— ì –ì§€ ì•Šê²Œ í•˜ê³  í¼ì³ì„œ ë¬¶ì–´ ë°°ì¶œí•©ë‹ˆë‹¤.' };
                case 'ìº”':
                    return { icon: 'coffee', color: 'green', desc: 'ë‚´ìš©ë¬¼ì„ ë¹„ìš°ê³  ê²‰ë©´ì„ í—¹êµ° ë’¤ ì••ì°©í•˜ì—¬ ë°°ì¶œí•©ë‹ˆë‹¤.' };
                case 'ìœ ë¦¬':
                    return { icon: 'flask-conical', color: 'indigo', desc: 'ë‚´ìš©ë¬¼ì„ ë¹„ìš°ê³  ëšœê»‘ì„ ì œê±°í•œ ë’¤ ìƒ‰ê¹”ë³„ë¡œ ë¶„ë¦¬í•˜ì—¬ ë°°ì¶œí•©ë‹ˆë‹¤.' };
                case 'ì¼ë°˜ì“°ë ˆê¸°':
                    return { icon: 'trash', color: 'red', desc: 'ì¢…ëŸ‰ì œ ë´‰íˆ¬ì— ë‹´ì•„ ë°°ì¶œí•©ë‹ˆë‹¤. (ì˜¤ì—¼ëœ í¬ì¥ì¬, ì¬í™œìš© ë¶ˆê°€ ë¹„ë‹)' };
                default:
                    return { icon: 'help-circle', color: 'gray', desc: 'ë¶„ë¥˜í•  ìˆ˜ ì—†ê±°ë‚˜ ìƒˆë¡œìš´ ì¬ì§ˆì…ë‹ˆë‹¤.' };
            }
        }

        /**
         * ë‹¨ì¼ ë¶„ë¥˜ ê²°ê³¼ë¥¼ ìœ„í•œ HTML ì¹´ë“œë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
         */
        function createResultCard(label, confidence, isPrimary) {
            const style = getCategoryStyle(label);
            const colorClass = style.color;
            const confidencePercent = (confidence * 100).toFixed(1);

            if (isPrimary) {
                // Main Result Card (Prominently styled)
                return `
                    <div class="result-card result-card-primary col-span-full border-t-8 border-${colorClass}-500 bg-white p-6 rounded-xl shadow-2xl transition duration-300 transform hover:scale-[1.01]">
                        <div class="flex items-center space-x-4">
                            <div class="p-4 rounded-full bg-${colorClass}-100 text-${colorClass}-600">
                                <i data-lucide="${style.icon}" class="w-10 h-10"></i>
                            </div>
                            <div>
                                <p class="text-xs text-gray-500 font-semibold">ğŸ† ìµœì¢… ì˜ˆì¸¡ (Top 1)</p>
                                <h3 class="text-4xl font-extrabold text-${colorClass}-700">${label}</h3>
                            </div>
                        </div>

                        <div class="mt-4 border-t border-gray-100 pt-4">
                            <p class="text-sm font-semibold text-gray-700 mb-2">ë¶„ë¦¬ìˆ˜ê±° ê°€ì´ë“œ</p>
                            <p class="text-base text-gray-600">${style.desc}</p>
                            <p class="mt-3 text-sm text-gray-500">ì‹ ë¢°ë„: <span class="font-bold text-${colorClass}-500">${confidencePercent}%</span></p>
                        </div>
                    </div>
                `;
            } else {
                // Secondary Results (Suggestions)
                return `
                    <div class="result-card p-4 border border-gray-200 rounded-lg shadow-sm bg-gray-50">
                        <div class="flex items-center space-x-3">
                            <i data-lucide="info" class="w-4 h-4 text-gray-500"></i>
                            <p class="text-sm font-semibold text-gray-600">ì¶”ê°€ ë¶„ë¥˜ í›„ë³´ (${label})</p>
                        </div>
                        <p class="mt-1 text-xs text-gray-500 ml-7">ì‹ ë¢°ë„: <span class="font-bold">${confidencePercent}%</span></p>
                    </div>
                `;
            }
        }


        /**
         * ì„œë²„ í˜¸ì¶œì´ ë¶ˆê°€ëŠ¥í•  ë•Œ ì‚¬ìš©í•  ê°€ì§œ ë¶„ë¥˜ ê²°ê³¼ ë°ì´í„°ì…ë‹ˆë‹¤.
         * íŒŒì¼ëª…ì— ë”°ë¼ ì‹œë®¬ë ˆì´ì…˜ ê²°ê³¼ë¥¼ ì¡°ì •í•˜ì—¬, ì‹¤ì œ ë°ì´í„° í¸í–¥ ë¬¸ì œë¥¼ ê°„ì ‘ì ìœ¼ë¡œ ë³´ì—¬ì¤ë‹ˆë‹¤.
         * @param {string} fileName ì—…ë¡œë“œëœ íŒŒì¼ì˜ ì´ë¦„ (Canvas í™˜ê²½ì—ì„œë§Œ ì‚¬ìš©)
         * @returns {object} ì‹œë®¬ë ˆì´ì…˜ëœ ë¶„ë¥˜ ê²°ê³¼
         */
        function simulateClassification(fileName = "") {
            const lowerCaseName = fileName.toLowerCase();
            // 5ê°œ í´ë˜ìŠ¤ë¡œ í™•ì¥
            const labels = ['í”Œë¼ìŠ¤í‹±', 'ì¢…ì´', 'ìº”', 'ìœ ë¦¬', 'ì¼ë°˜ì“°ë ˆê¸°']; 
            let primaryLabel = ''; 

            // 1. íŒŒì¼ëª… ê¸°ë°˜ìœ¼ë¡œ primaryLabel ê²°ì • (ë†’ì€ ì •í™•ë„ ì‹œë®¬ë ˆì´ì…˜)
            if (lowerCaseName.includes('ì¢…ì´') || lowerCaseName.includes('paper') || lowerCaseName.includes('ë°•ìŠ¤')) {
                primaryLabel = 'ì¢…ì´';
            } else if (lowerCaseName.includes('ìº”') || lowerCaseName.includes('can') || lowerCaseName.includes('ì½œë¼')) {
                primaryLabel = 'ìº”';
            } else if (lowerCaseName.includes('ìœ ë¦¬') || (lowerCaseName.includes('ë³‘') && !lowerCaseName.includes('pet') && !lowerCaseName.includes('í”Œë¼ìŠ¤í‹±'))) {
                primaryLabel = 'ìœ ë¦¬';
            } else if (lowerCaseName.includes('í”Œë¼ìŠ¤í‹±') || lowerCaseName.includes('pet') || lowerCaseName.includes('í˜íŠ¸') || lowerCaseName.includes('bottle')) {
                primaryLabel = 'í”Œë¼ìŠ¤í‹±'; 
            } else if (lowerCaseName.includes('ì“°ë ˆê¸°') || lowerCaseName.includes('general') || lowerCaseName.includes('ì˜¤ì—¼') || lowerCaseName.includes('ë¹„ë‹')) {
                primaryLabel = 'ì¼ë°˜ì“°ë ˆê¸°';
            } else {
                // [ê°œì„ ëœ ë¡œì§] íŒŒì¼ëª…ì´ íŠ¹ì •ë˜ì§€ ì•Šì€ ê²½ìš°, í—·ê°ˆë¦¬ê¸° ì‰¬ìš´ ì„¸ ê°€ì§€ (í”Œë¼ìŠ¤í‹±, ìœ ë¦¬, ì¼ë°˜ì“°ë ˆê¸°) ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•˜ì—¬
                // 'ì¢…ì´'ë‚˜ 'ìº”'ìœ¼ë¡œ ì˜¤ë¶„ë¥˜ë˜ëŠ” ê²½ìš°ë¥¼ ì¤„ì…ë‹ˆë‹¤.
                const ambiguousLabels = ['í”Œë¼ìŠ¤í‹±', 'ìœ ë¦¬', 'ì¼ë°˜ì“°ë ˆê¸°'];
                primaryLabel = ambiguousLabels[Math.floor(Math.random() * ambiguousLabels.length)];
            }
            
            // 2. ì˜ˆì¸¡ ê²°ê³¼ ìƒì„±
            const predictions = [];
            const primaryConfidence = (0.90 + Math.random() * 0.09); // Top 1: 90% ~ 99%

            predictions.push({ label: primaryLabel, confidence: primaryConfidence });

            // 3. ë‚˜ë¨¸ì§€ ì‹ ë¢°ë„ í• ë‹¹ (Top 2/3 ìƒì„±ì„ ìœ„í•´)
            labels.forEach(label => {
                if (label !== primaryLabel) {
                    let confidence = Math.random() * 0.1; // ê¸°ë³¸ì ìœ¼ë¡œ ë‚®ìŒ
                    
                    // Top 2/3ì´ ìƒê¸¸ ìˆ˜ ìˆë„ë¡ ì˜ë„ì ìœ¼ë¡œ ë‘ ë²ˆì§¸ë¡œ ë†’ì€ ì‹ ë¢°ë„ë¥¼ ë§Œë“­ë‹ˆë‹¤.
                    // ì˜ˆë¥¼ ë“¤ì–´, 'í”Œë¼ìŠ¤í‹±'ê³¼ 'ì¼ë°˜ì“°ë ˆê¸°'ëŠ” ìì£¼ í—·ê°ˆë¦°ë‹¤ê³  ê°€ì •í•˜ê³  ì‹ ë¢°ë„ë¥¼ ë†’ì…ë‹ˆë‹¤.
                    if (primaryLabel === 'í”Œë¼ìŠ¤í‹±' && label === 'ì¼ë°˜ì“°ë ˆê¸°') {
                        confidence = 0.15 + Math.random() * 0.25; // 15% ~ 40%
                    } else if (primaryLabel === 'ìœ ë¦¬' && label === 'ì¼ë°˜ì“°ë ˆê¸°') {
                        confidence = 0.1 + Math.random() * 0.15; // 10% ~ 25%
                    } else if (primaryLabel === 'ì¢…ì´' && label === 'ì¼ë°˜ì“°ë ˆê¸°') {
                        confidence = 0.05 + Math.random() * 0.15; // 5% ~ 20%
                    }
                    predictions.push({ label: label, confidence: confidence });
                }
            });

            return {
                status: "success",
                predictions: predictions.sort((a, b) => b.confidence - a.confidence), // ì‹ ë¢°ë„ ìˆœ ì •ë ¬
                model_version: "EfficientNet_V2.1"
            };
        }

        // ì´ˆê¸° ì•„ì´ì½˜ ë Œë”ë§
        window.onload = function() {
            lucide.createIcons();
        };

    </script>
</body>
</html>
